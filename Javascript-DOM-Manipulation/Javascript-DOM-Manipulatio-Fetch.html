<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>List Items Sample</title>
</head>
<body id="body">

<h1>List Items Sample</h1>

<h2>Order List: List Items</h2>

<button>Click</button>

<my-element target-element-id="body"></my-element>





<script>
const elementsArray = [];

customElements.define('my-element', class extends HTMLElement {
    connectedCallback() {
        const targetElementId = this.getAttribute('target-element-id');

        if (!targetElementId) {
            console.error("Target element ID is required.");
            return;
        }

        const targetElement = document.getElementById(targetElementId);

        if (!targetElement) {
            console.error("Target element not found in the current page.");
            return;
        }

        const elementInfo = this.extractElementInfo(targetElement);
        elementsArray.push(elementInfo);
        console.log("Element Info Pushed to Array:", JSON.stringify(elementInfo, null, 2));
        console.log("Current Array:", elementsArray); // Log the array after pushing element info
    }

    extractElementInfo(element) {
        const elementInfo = {
            tagName: element.tagName.toLowerCase(),
            id: element.id,
            class: element.className,
            attributes: {},
            events: {},
            innerText: element.innerText.trim(),
            innerHTML: element.innerHTML.trim()
        };

        // Extract attributes
        Array.from(element.attributes).forEach(attribute => {
            elementInfo.attributes[attribute.name] = attribute.value;
        });

        // Extract events
        ['click', 'mouseover', 'load', 'submit'].forEach(eventType => {
            if (typeof element['on' + eventType] === 'function') {
                elementInfo.events[eventType] = element['on' + eventType].toString();
            }
        });

        // Extract ARIA labels
        const ariaLabels = element.querySelectorAll('[aria-label]');
        elementInfo.ariaLabels = Array.from(ariaLabels).map(label => label.getAttribute('aria-label'));

        // Recursively extract child elements
        elementInfo.children = Array.from(element.children).map(child => this.extractElementInfo(child));

        return elementInfo;
    }
});

const button = document.querySelector("button");

button.addEventListener("click", (event) => {
  button.textContent = `Click count: ${event.detail}`;
});
</script>

</body>
</html>
